<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Profile</title>

      <link rel="stylesheet" href="../styles/output.css" />

      <link
         rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
         integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
         crossorigin="anonymous"
         referrerpolicy="no-referrer" />

      <!-- Protect page -->
      <script></script>
   </head>
   <body class="bg-neutral-100">
      <!-- Include this script tag or install `@tailwindplus/elements` via npm: -->
      <nav class="relative bg-white border-b border-neutral-200">
         <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
            <div class="relative flex h-16 items-center justify-between">
               <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                  <!-- Mobile menu button-->
                  <button
                     type="button"
                     command="--toggle"
                     commandfor="mobile-menu"
                     class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-white/5 hover:text-white focus:outline-2 focus:-outline-offset-1 focus:outline-indigo-500">
                     <span class="absolute -inset-0.5"></span>
                     <span class="sr-only">Open main menu</span>
                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6 in-aria-expanded:hidden">
                        <path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" stroke-linecap="round" stroke-linejoin="round" />
                     </svg>
                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6 not-in-aria-expanded:hidden">
                        <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                     </svg>
                  </button>
               </div>
               <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                  <div class="flex shrink-0 items-center">
                     <img src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=500" alt="Your Company" class="h-8 w-auto" />
                     <h1 class="text-gray-900 font-normal ms-2">MY<span class="font-bold">BLOGS</span></h1>
                  </div>
               </div>
               <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                  <div class="hidden sm:ml-6 sm:block">
                     <div class="flex space-x-4">
                        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-white/5 hover:text-white" -->
                        <a href="./dashboard.html" aria-current="page" class="rounded-md bg-gray-900 px-3 py-2 text-sm font-medium text-white hover:bg-sky-700 hover:text-white">Public</a>
                        <a href="#" class="rounded-md px-3 py-2 text-sm font-medium text-gray-900 hover:bg-white/5 hover:text-sky-700">Edit Profile</a>
                     </div>
                  </div>

                  <!-- Profile dropdown -->
                  <el-dropdown class="relative ml-3">
                     <button class="relative flex rounded-full focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 hover:cursor-pointer">
                        <span class="absolute -inset-1.5"></span>
                        <span class="sr-only">Open user menu</span>
                        <img
                           src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                           alt=""
                           class="size-8 rounded-full bg-gray-800 outline -outline-offset-1 outline-white/10" />
                     </button>

                     <el-menu
                        anchor="bottom end"
                        popover
                        class="w-48 origin-top-right rounded-md bg-white py-1 shadow-lg outline outline-black/5 transition transition-discrete [--anchor-gap:--spacing(2)] data-closed:scale-95 data-closed:transform data-closed:opacity-0 data-enter:duration-100 data-enter:ease-out data-leave:duration-75 data-leave:ease-in">
                        <a href="profile.html" class="block px-4 py-2 text-sm text-gray-700 focus:bg-gray-100 focus:outline-hidden">Your profile</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 focus:bg-gray-100 focus:outline-hidden">Dashboard</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 focus:bg-gray-100 focus:outline-hidden">Settings</a>
                        <a id="logout" href="#" class="block px-4 py-2 text-sm text-gray-700 focus:bg-gray-100 focus:outline-hidden">Sign out</a>
                     </el-menu>
                  </el-dropdown>
               </div>
            </div>
         </div>

         <el-disclosure id="mobile-menu" hidden class="block sm:hidden">
            <div class="space-y-1 px-2 pt-2 pb-3">
               <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-white/5 hover:text-white" -->
               <a href="#" aria-current="page" class="block rounded-md bg-gray-900 px-3 py-2 text-base font-medium text-white">Dashboard</a>
               <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-white/5 hover:text-white">Team</a>
               <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-white/5 hover:text-white">Projects</a>
               <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-300 hover:bg-white/5 hover:text-white">Calendar</a>
            </div>
         </el-disclosure>
      </nav>

      <!-- content section -->
      <section class="mx-auto max-w-5xl px-2 sm:px-6 lg:px-8 mt-20 flex flex-col gap-4">
         <!-- card profile -->
         <div class="relative w-full bg-white flex flex-col gap-4 rounded-lg px-20 py-5">
            <img id="avatar" src="" class="absolute -top-13 left-1/2 -translate-x-1/2 w-35 h-35 rounded-full bg-neutral-800 border-8 border-neutral-100" />
            <!-- information -->
            <div class="text-center mt-20">
               <h1 id="profile-name" class="text-2xl font-medium">Farhan Aldiansyah Poetra</h1>
               <p id="profile-bio" class="text-sm text-neutral-700 mt-4">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident animi beatae ad, tempora vero earum nam velit tempore! Error, veniam.
               </p>
               <div id="info-profile" class="mt-4 flex items-center gap-4 justify-center">
                  <p id="address" class="text-sm text-neutral-700"><i class="fas fa-location-pin-lock"></i> Karawang, Indonesia</p>
                  <p id="joinned" class="text-sm text-neutral-700"><i class="fas fa-network-wired"></i> Joined on Dec 2025</p>
                  <p class="text-sm text-neutral-700"><i class="fas fa-link"></i> <a id="personal-web" href="#" class="text-sky-700">www.personalweb.com</a></p>
               </div>
            </div>
         </div>

         <!-- blog information -->
         <div class="w-full bg-white flex items-center justify-center gap-4 rounded-lg px-20 py-5">
            <div class="flex items-center gap-2 bg-neutral-100 py-2 px-4 rounded-lg font-medium text-neutral-700">
               <i class="fas fa-newspaper"></i>
               <p>1 posts published</p>
            </div>
            <div class="flex items-center gap-2 bg-neutral-100 py-2 px-4 rounded-lg font-medium text-neutral-700">
               <i class="fas fa-comment-alt"></i>
               <p>5 comments written</p>
            </div>
            <div class="flex items-center gap-2 bg-neutral-100 py-2 px-4 rounded-lg font-medium text-neutral-600">
               <i class="fas fa-hashtag"></i>
               <p>10 tags followed</p>
            </div>
         </div>

         <!-- skills and more information -->
         <div></div>
      </section>

      <!-- script -->
      <script src="../scripts/config.js"></script>
      <script type="module">
         import { logout } from "../api/auth.js";
         import { readProfile } from "../api/profile.js";
         const { API_BASE_URL } = window.APP_CONFIG;

         // read profile action
         async function initProfile() {
            try {
               const avatar = document.getElementById("avatar");
               const name = document.getElementById("profile-name");
               const bio = document.getElementById("profile-bio");
               if (!avatar || !name || !bio) return;

               const data = await readProfile();
               if (!data?.userProfile) {
                  console.warn("User not authenticated");
                  return;
               }

               avatar.src = `${API_BASE_URL}${data.userProfile.avatar}`;
               name.innerText = data.userProfile.fullname;
               bio.innerText = data.userProfile.bio;
            } catch (err) {
               console.log("Init profile failed: ", err);
            }
         }

         initProfile();

         // logout action
         const btnLogout = document.getElementById("logout").addEventListener("click", async (e) => {
            e.preventDefault();

            const res = await logout();
            if (res.ok) {
               alert("User logout");
               window.location.href = "index.html";
            } else {
               alert(res.message);
            }
         });
      </script>
   </body>
</html>
